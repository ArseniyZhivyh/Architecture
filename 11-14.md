# 11. ADR
№ | Решение | Причины | Отвергнутые альтернативы
--- | --- | --- | ---
1 | Общая архитектура приложения – сервис-ориентированная | Так как приложение будет содержать много функциональности, но в то же время микросервисы не имеют большого смысла так как в крупные сервисы можно запечатать определённый бизнес домен | Монолит, микросервисы
2 | Сервисы видов спорта | Такое решение позволит переиспользовать существующие приложения видов спорта и не сделает ядро бизнес-логики слишком громоздким. При этом позволит типизировать взаимодействие с этими сервисами через API GateWay | Организовать логику видов спорта в ядре бизнес-логики
3 | Общий сервис тренировочных программ | Часто пользователь может заниматься несколькими видами спорта одновременно. На такой случай программу тренировок ему необходимо составлять с учётом этого, комбинированную | Отсутствие агрегации тренировочных программ / агрегация в основном ядре
4 | Front API GateWay | Пользователи будут пользоваться приложениями на разных платформах, браузером на разных устройствах – это значит, что будет несколько различных клиентов с разными версиями и разной функциональностью, необходим GateWay | Жёсткая фиксация Front API

# 12. Описание сценариев использования приложения
## 12.1. Отслеживание пользователем тренировок по бегу
![image](https://user-images.githubusercontent.com/64650727/211064428-1a88c287-4906-4b50-9b6c-c65393f91f0a.png)

## 12.2. Клиент решил начать заниматься фитнесом
![image](https://user-images.githubusercontent.com/64650727/211064522-f7e0de01-335d-45cf-9cef-fd27d26e2233.png)

## 12.3. Соревнование по шагам за месяц
![image](https://user-images.githubusercontent.com/64650727/211064589-546e52fb-38bd-424f-99dd-32441c7b906f.png)

# 13. Базовая архитектура
![image](https://user-images.githubusercontent.com/64650727/211064641-082cdd73-f1e3-4eec-ae0c-40f8d25f769a.png)

# 14. Основные представления
## 14.1. Функциональное представление
![image](https://user-images.githubusercontent.com/64650727/211064831-3324e01a-f9ea-4341-b61b-eb83d7dc354d.png)

## 14.2. Информационное представление
![image](https://user-images.githubusercontent.com/64650727/211064939-5e8f9882-97a1-40af-ac92-c6a2c31a2eb3.png)

## 14.3. Представление мультизадачности
![image](https://user-images.githubusercontent.com/64650727/211065001-4d36fabc-7a1c-4e7b-bc2e-60d1900bf8e1.png)

## 14.4. Инфраструктурное представление
![image](https://user-images.githubusercontent.com/64650727/211065085-dcd1a195-6cb8-49ed-ba13-97f3efdf758d.png)
  
  
В скобках указывается количество узлов, 2 нужны для резервирования, N означает, что узлов может быть много. На сервисах видов спорта балансировщик на отдельные популярные сервисы, на наименее популярных можно обойтись без него 1-2 узлами.  

## 14.5. Представление безопасности
![image](https://user-images.githubusercontent.com/64650727/211065373-b4cda502-1e9c-4639-97ae-b2a0fce075e4.png)

# Требования к доменам
## Сервисы видов спорта
**Функциональные требования:** 

•	Сервис вида спорта хранит в себе информацию о необходимом для этого вида спорта инвентаре; 

•	Сервис вида спорта хранит в себе информацию о программах тренировок по данному виду спорта и может составить программу для клиента с учётом особенностей клиента; 

•	Сервис вида спорта должен предоставлять API для бизнес-логики системы и общего сервиса тренировочных программ с целью обмена информации об инвентаре, клиенте, тренировочных программах; 

•	Сервис вида спорта отслеживает прогресс клиента по данному виду спорта и предоставляет аналитику; 

•	Сервис вида спорта имеет функциональность для проведения соревнований по этому виду спорта. 

**Нефункциональные требования:** 

•	Сервис вида спорта выдерживает нагрузку запросов, соответствующую пиковым значениям (рассчитывается по каждому сервису индивидуально); 

•	Доступность сервиса вида спорта определяется по каждому виду спорта отдельно на основании его востребованности; 

•	Новые сервисы видов спорта разрабатываются с учётом их развёртывания в облачной инфраструктуре. 
## Общий сервис тренировочных программ
**Функциональные требования:** 
•	Сервис может обращаться в сервисы видов спорта для создания для клиента комбинированной программы тренировок; 

•	Сервис получает информацию о клиенте, его желаниях и инвентаре и обращается в сервисы видов спорта для создания программы тренировок; 

•	Сервис контролирует распределение спортивной нагрузки. 

**Нефункциональные требования:** 

•	Сервис разрабатывается с учётом развёртывания в облачной инфраструктуре; 

•	Сервис выдерживает нагрузку пиковую равную запросам тренировки от всех пользователей системы на промежутке в один час; 

•	Сервис хранит в себе минимальный набор данных о клиенте после того как была создана программа тренировок; 

•	Для сервиса предпочтительны асинхронные интеграции с ответом. Так как он высоконагружен и нужно понимать, когда удалять клиентские данные. 
## Сервис новостей
**Функциональные требования:**  

•	Сервис новостей интегрирован с одним или несколькими наиболее достоверными и актуальными новостными источниками по спортивной тематике; 

•	Сервис новостей имеет механизм дедубликации новостей: то есть если новость из одного источника уже была опубликована, то та же самая новость из другого источника не должна публиковаться; 

•	Сервис новостей имеет интерфейс администратора, где можно опубликовать вручную новость с приложением медиа материалов, удалить новость, установить отсроченную публикацию.  

**Нефункциональные требования:**  

•	Доступность сервиса новостей не менее 99%; 

•	Необходимо обеспечить безопасность интеграции с новостными источниками, учитывая, что источники находятся во внешней сети относительно организации; 

•	Сервис новостей не хранит пользовательские данные и иную чувствительную информацию. 
## Сервис социальных коммуникаций
**Функциональные требования:**  

•	Сервис должен формировать социальные группы по интересам, которые будут самоподдерживаться и в которых участники будут общаться и влиять друг на друга; 

•	Возможность поиска людей по схожим интересам, поиск людей, которые тренируются в том же месте, имеют те же маршруты или которые тренируются прямо сейчас, для формирования групп для совместных занятий; 

•	Уведомление друзей о ваших новых успехах; 

•	Интеграция с наиболее популярными социальными сетями.  

**Нефункциональные требования:**  

•	Сервис должен хранить в себе минимальный набор пользовательских данных, предпочтительно запрашивать данные в ядре; 

•	Доступность сервиса не менее 99,99%.  
## Client Server
**Функциональные требования:**  

•	Обеспечивает авторизацию и регистрацию пользователей, возможна регистрация через социальные сети; 

•	Имеет (или может запросить) данные о клиентах магазина и может синхронизовать их с пользователями приложения; 

•	Обеспечивает подключение пользовательских устройств; 

•	Обеспечивает обновление интерфейсов пользователей.  

**Нефункциональные требования:**  

•	Основной приоритет отдаётся информационной безопасности; 

•	Доступность сервиса не менее 99,99%; 

•	Обновление пользовательского интерфейса не более 2 сек; 

•	Разработка с учётом быстрой масштабируемости и развёртывании в облаке. 
## Соревнования и геймификация
**Функциональные требования:**  

•	Обладает функциональностью для проведения соревнований по разным видам спорта с большим количеством участников; 

•	Геймификация (необходимо прорабатывать отдельно со стейкхолдерами). 

**Нефункциональные требования:**  

•	Не хранит персональные данные пользователей; 

•	Предпочтительны асинхронные взаимодействия; 

•	Разработка с учётом масштабирования во время соревнований. 
